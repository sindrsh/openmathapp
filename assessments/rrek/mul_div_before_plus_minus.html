<!DOCTYPE html>
<html>
    <head>
        <style>
            div {
                width: 70%;
                margin: auto;
            }
        </style>
    </head>

    <body>
        <script type="module">

            import CalcTask from "../calc_modules.js"

            const task = new CalcTask("mulDivBeforePlusMinus", makeTask, 1)
            task.prepare()
            function makeTask() {
                let answer
                let a = Math.floor(Math.random() * 9) + 1
                let b = Math.floor(Math.random() * 9) + 1
                let c = Math.floor(Math.random() * 8) + 2
                a = 100
                b = 0
                let op = `<mo> + </mo>`
                let minus = false
                let sign = 1
                if ( Math.floor(Math.random() * 2) === 0 ) {
                    op = `<mo> − </mo>`
                    minus = true
                    sign = -1
                }
                let A = `<mn> ${a} </mn>`
                let BC = `<mn> ${b} </mn> <mo> ⋅ </mo> <mn> ${c} </mn>`
                if ( Math.floor(Math.random() * 2) === 0 ) {
                    if (minus) {
                        if (b*c > a) {
                            a = b*c + Math.floor(Math.random() * 9)
                            A = `<mn> ${a} </mn>`
                        }
                    }
                    document.getElementsByTagName("math")[0].innerHTML = A + op +  BC + `<mo>=</mo>`
                    answer = a + sign*b*c
                } else {
                    if (minus) {
                        if (a > b*c) {
                            a = Math.floor(Math.random() * (b*c - 1)) + 1
                            A = `<mn> ${a} </mn>`
                        }
                    }
                    document.getElementsByTagName("math")[0].innerHTML = BC + op + A + `<mo>=</mo>`
                    answer = b*c + sign*a
                }
                return answer    
            }    
            
        </script>
    </body
</html>

